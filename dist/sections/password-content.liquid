<!-- sections/password-content.liquid -->

{% comment %}
  Password message which you can edit on http://www.shopify.com/admin/online_store/preferences
{% endcomment %}

<div class="container l center">

  <div class="password-heading">
    <h2>{{ section.settings.header }}</h2>
  </div>

  {% unless shop.password_message == blank %}
    <div class="password-message">
      {{ shop.password_message }}
    </div>
  {% endunless %}

  {% if section.settings.newsletter_enable %}
    {% form 'customer' %}
      {{ form.errors | default_errors }}
      {% if form.posted_successfully? %}
        <p class="note form-success">
          {{ 'password_page.signup_form_success' | t }}
        </p>
      {% else %}
        <p class="h4">
          {{ section.settings.newsletter_form_heading }}
        </p>
        <input type="hidden" name="contact[tags]" value="prospect, password page">
        <label for="email" class="hidden">{{ 'password_page.signup_form_email_label' | t }}</label>
        <input type="email" name="contact[email]" id="Email" class="input-group__field" placeholder="{{ section.settings.newsletter_placeholder }}">
        <button type="submit" name="commit">
          {{ section.settings.newsletter_button_text }}
        </button>
      {% endif %}
    {% endform %}
  {% endif %}

</div>

{% stylesheet %}
.password-heading {
  margin-bottom: 50px;
}
form#contact_form {
  margin-bottom: 50px;
}
{% endstylesheet %}

{% schema %}
  {
    "name": "Content",
    "settings": [
      {
        "type": "text",
        "id": "header",
        "label": "Heading",
        "default": "Coming Soon"
      },
      {
        "type": "checkbox",
        "id": "newsletter_enable",
        "label": "Show newsletter signup",
        "default": true
      },
      {
        "type": "text",
        "id": "newsletter_form_heading",
        "label": "Newsletter form heading",
        "default": "Be the first to know when we launch.",
        "info": "[Tell your visitors about a launch day discount](https://www.shopify.ca/blog/15514000-14-ways-to-use-offers-coupons-discounts-and-deals-to-drive-revenue-and-customer-loyalty)."
      },
      {
        "type": "text",
        "id": "newsletter_placeholder",
        "label": "Newsletter placeholder text",
        "default": "Email address"
      },
      {
        "type": "text",
        "id": "newsletter_button_text",
        "label": "Newsletter button text",
        "default": "Notify me"
      }
    ]
  }
{% endschema %}
